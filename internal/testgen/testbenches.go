package testgen

// svTestbenchTemplate is the template for SystemVerilog testbenches
// Parameters:
// 1. Include directive for the mocked module
// 2. Declarations
// 3. Module instance
// 4. Input count
// 5. Input read code
// 6. Reset toggle code
// 7. Clock toggle code
// 8. Output count
// 9. Output write code
const svTestbenchTemplate = `// Generated SystemVerilog testbench
// Do not edit this file directly : edit the template in internal/testgen/testbenches.go and generator.go
%s // Include the mocked module file

module top;
%s
%s

    initial begin
        string line;
        int fd;
        int status;

        // Read %d input files
%s

        // Toggle reset if a reset signal was identified
%s

        // Toggle clock signals
%s

        // Allow module to process and settle
        #10; // Increased delay for settling
        
        // Additional clock cycles to ensure all sequential logic settles
        #10;
        #10;

        // Write %d output files
%s

        $finish;
    end
endmodule`

// cxxrtlTestbenchTemplate is the template for C++ testbenches
// Parameters:
// 1. Module name (for include directive, e.g., "my_module")
// 2. Module name (for CXXRTL class name, e.g., "my_module" -> cxxrtl_design::p_my_module)
// 3. Module instance name (e.g., "my_module_i")
// 4. Input declarations
// 5. Input reads
// 6. Input application
// 7. Clock handling and evaluation code
// 8. Output writes
const cxxrtlTestbenchTemplate = `// Generated SystemVerilog testbench
// Do not edit this file directly : edit the template in internal/testgen/testbenches.go and generator.go
#include "%s.cc" // CXXRTL generated header for the module
// You might need a common CXXRTL include, e.g.:
// #include "cxxrtl_lib.h" 

#include <fstream>
#include <iostream>
#include <iomanip> // Required for std::setw and std::setfill
#include <cstdint>
#include <string>
#include <sstream> // Required for std::hex and std::stringstream

// Assuming the CXXRTL-generated code uses a 'cxxrtl_design' namespace 
// and prefixes the module class with 'p_'. Adjust if your CXXRTL setup differs.
int main(int argc, char** argv) {
    cxxrtl_design::p_%s %s_i; // DUT instance: cxxrtl_design::p_ (2. cxxrtlMangledModuleName) (3. baseModuleNameForInstance)_i;

    // Declare input variables
%s // 4. Input declarations
    
    // Read input values
%s // 5. Input reads
    
    // Apply inputs to DUT
%s // 6. Input application
    
    // Handle reset, clock toggling, and evaluation
%s // 7. Clock handling and evaluation code
    
    // Write outputs from DUT
%s // 8. Output writes
    
    // CXXRTL objects on the stack are cleaned up automatically
    return 0;
}
`
